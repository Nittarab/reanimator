server:
  port: 8080
  read_timeout: 30s
  write_timeout: 30s

database:
  host: ${DATABASE_HOST:-localhost}
  port: ${DATABASE_PORT:-5432}
  database: ${DATABASE_NAME:-ai_sre}
  user: ${DATABASE_USER:-postgres}
  password: ${DATABASE_PASSWORD:-postgres}
  ssl_mode: ${DATABASE_SSL_MODE:-disable}

redis:
  host: ${REDIS_HOST:-localhost}
  port: ${REDIS_PORT:-6379}
  password: ${REDIS_PASSWORD:-}
  db: ${REDIS_DB:-0}

github:
  api_url: ${GITHUB_API_URL:-https://api.github.com}
  token: ${GITHUB_TOKEN}
  workflow_name: remediate-incident.yml

service_mappings:
  - service_name: api-gateway
    repository: org/api-gateway
    branch: main
  - service_name: user-service
    repository: org/user-service
    branch: main
  - service_name: payment-service
    repository: org/payment-service
    branch: main

deduplication:
  time_window: 5m

concurrency:
  max_workflows_per_repo: 2

mcp_servers: []

custom_rules:
  - name: high-priority-payment-errors
    description: Escalate payment service errors to critical
    enabled: true
    conditions:
      service_name: payment-service
      error_pattern: ".*payment.*failed.*"
    actions:
      set_severity: critical
      add_metadata:
        priority: high
        team: payments
  
  - name: ignore-test-errors
    description: Skip remediation for test environment errors
    enabled: true
    conditions:
      metadata:
        environment: test
    actions:
      skip_remediation: true
      add_metadata:
        reason: test_environment
